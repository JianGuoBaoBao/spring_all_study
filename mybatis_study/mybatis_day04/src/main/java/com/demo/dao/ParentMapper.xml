<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
        PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
        "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.com.demo.dao.ParentDao"><!--绑定一个对应的Dao/Mapper接口-->

    <select id="getUser" resultType="User">
        select * from mybatis_demo.user where parent =#{parent}
    </select>

    <select id="getParentByUserId" resultMap="parentMap">
        select * from mybatis_demo.parent
    </select>

    <resultMap id="parentMap" type="Parent">
        <!--column是数据库中的字段， property实体类中的属性-->
        <result  column="parentId" property="parentId" />
        <result  column="fatherName" property="fatherName" />
        <result  column="motherName" property="motherName" />

        <!--
            复杂的属性，我们需要单独处理
            对象：association
            集合：collection
        -->
        <!--这里的条件是由Parent里，column是Parent里的条件-->
        <association property="user" column="parentId" javaType="User" select="getUser" />
        <!--<collection property="" column="" />-->
    </resultMap>



    <!--复杂sql-->
    <resultMap id="parentMap2" type="Parent">
        <result  property="parentId" column="ppid" />
        <result  property="fatherName" column="pfather" />
        <result  property="motherName" column="pmother" />

        <association property="user" javaType="User">
            <result property="username" column="uuser" />
        </association>

        <!--List<User>-->
<!--        <collection property="user" ofType="User">-->
<!--            <result property="username" column="uuser" />-->
<!--        </collection>-->
    </resultMap>

    <select id="getParentByUserId2" resultMap="parentMap2">
        select p.parentId ppid, p.fatherName pfather, p.motherName pmother, u.userName uuser from parent p, user u where u.parent = p.parentId
    </select>




</mapper>
