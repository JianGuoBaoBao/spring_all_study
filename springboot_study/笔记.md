#day01
schannel: failed to receive handshake, SSL/TLS connection failed
git config --global http.sslBackend "openssl"


 [https://mp.weixin.qq.com/s?__biz=MjM5MDA2MTI1MA==&mid=2649126312&idx=2&sn=ce2722fb69b52283ff3ccc3502a2a7b3&chksm=be585205892fdb13f1768fbca09107b2557276c29213b2ff3da7b747103eb702c3d3d2b0131e&scene=27]
 [git 慢速解决方法]
>
> Springboot自动装配原理

`启动器比如spring-boot-starter-web 会帮我们自动导入web环境所有的依赖！
springboot会将所有功能的场景变成一个个启动器
我们要使用什么功能，就只需要找到对应的启动器就可以了`

###主程序
```
    // SpringBootApplication： 标志这个类是一个springboot的应用
    @SpringBootApplication
    public class Springboot01HelloworldApplication {
    
        public static void main(String[] args) {
            SpringApplication.run(Springboot01HelloworldApplication.class, args);
        }
    
    }
```

- 注解

> @SpringBootConfiguration : springboot的配置
```
     @Configuration: spring配置类
     @Component: 说明这也是一个spring的组件
```

    
> @EnableAutoConfiguration: 自动配置
```
    @AutoConfigurationPackage : 自动配置
        @Import(AutoConfigurationPackages.Registrar.class)： 自动配置包  ·包注册· 
    @Import(AutoConfigurationImportSelector.class) ：自动配置导入选择

// 获取所有的配置
List<String> configurations  = getCandidateConfigurations(annotationMetadata, attributes);
    
```

> 获取候选的配置
```
AutoConfigurationImportSelector:
protected List<String> getCandidateConfigurations(AnnotationMetadata metadata, AnnotationAttributes attributes) {
		List<String> configurations = new ArrayList<>(
				SpringFactoriesLoader.loadFactoryNames(getSpringFactoriesLoaderFactoryClass(), getBeanClassLoader()));
		ImportCandidates.load(AutoConfiguration.class, getBeanClassLoader()).forEach(configurations::add);
		Assert.notEmpty(configurations,
				"No auto configuration classes found in META-INF/spring.factories nor in META-INF/spring/org.springframework.boot.autoconfigure.AutoConfiguration.imports. If you "
						+ "are using a custom packaging, make sure that file is correct.");
		return configurations;
	}


SpringFactoriesLoader:
public static List<String> loadFactoryNames(Class<?> factoryType, @Nullable ClassLoader classLoader) {
		ClassLoader classLoaderToUse = classLoader;
		if (classLoaderToUse == null) {
			classLoaderToUse = SpringFactoriesLoader.class.getClassLoader();
		}
		String factoryTypeName = factoryType.getName();
		return loadSpringFactories(classLoaderToUse).getOrDefault(factoryTypeName, Collections.emptyList());
	} 


public static final String FACTORIES_RESOURCE_LOCATION = "META-INF/spring.factories";


```
-  SpringBoot启动会加载大量的自动配置类 @EnableAutoConfiguration
-  我们看我们需要的功能有没有在SpringBoot默认写好的自动配置类当中；
-  我们再来看这个自动配置类中到底配置了哪些组件；（只要我们要用的组件存在在其中，我们就不需要在手动配置了）
-  给容器自动配置类添加组件的时候，会从properties类中获取某些属性。我们只需要在配置文件中指定这些属性的值即可；
-  xxxAutoConfiguration： application.yml 默认值 xxxProperties 和配置文件绑定， 我们就可以使用自定义的配置了;



### 静态资源配置

```
WebMvcAutoConfiguration.java
		@Override
		public void addResourceHandlers(ResourceHandlerRegistry registry) {
			if (!this.resourceProperties.isAddMappings()) {
				logger.debug("Default resource handling disabled");
				return;
			}
			addResourceHandler(registry, "/webjars/**", "classpath:/META-INF/resources/webjars/");
			addResourceHandler(registry, this.mvcProperties.getStaticPathPattern(), (registration) -> {
				registration.addResourceLocations(this.resourceProperties.getStaticLocations());
				if (this.servletContext != null) {
					ServletContextResource resource = new ServletContextResource(this.servletContext, SERVLET_LOCATION);
					registration.addResourceLocations(resource);
				}
			});
		}
/webjars/**  -> classpath:/META-INF/resources/webjars/
 
WebMvcProperties.java
	/**
	 * Path pattern used for static resources.
	 */
	private String staticPathPattern = "/**";



    private static final String[] CLASSPATH_RESOURCE_LOCATIONS = { "classpath:/META-INF/resources/",
            "classpath:/resources/", "classpath:/static/", "classpath:/public/" };

    /**
     * Locations of static resources. Defaults to classpath:[/META-INF/resources/,
     * /resources/, /static/, /public/].
     */
    private String[] staticLocations = CLASSPATH_RESOURCE_LOCATIONS;


    静态资源可以之间访问，按优先级排序
    resources、 static(默认)、 public

    配置了spring.mvc.static-path-pattern会找不到路径
```

###thymeleaf
```
	public static final String DEFAULT_PREFIX = "classpath:/templates/";

	public static final String DEFAULT_SUFFIX = ".html";
```


